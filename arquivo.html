<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquivo de Projetos - Sales Tasks</title>
    <link rel="icon" href="https://salesprime.com.br/wp-content/uploads/2024/06/cropped-cropped-Favicon-site-32x32.webp"
        sizes="32x32" />
    <link rel="icon"
        href="https://salesprime.com.br/wp-content/uploads/2024/06/cropped-cropped-Favicon-site-192x192.webp"
        sizes="192x192" />
    <link rel="apple-touch-icon"
        href="https://salesprime.com.br/wp-content/uploads/2024/06/cropped-cropped-Favicon-site-180x180.webp" />
    <meta name="msapplication-TileImage"
        content="https://salesprime.com.br/wp-content/uploads/2024/06/cropped-cropped-Favicon-site-270x270.webp" />
    <meta name="description"
        content="Sales Prime - Fundada por Dani Martins, campe√£ de vendas reconhecida internacionalmente e criadora do M√©todo PRIME." />
    <meta name="robots" content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large" />
    <link rel="canonical" href="https://salesprime.com.br/" />
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Sales Prime" />
    <meta property="og:description"
        content="Sales Prime - Fundada por Dani Martins, campe√£ de vendas reconhecida internacionalmente e criadora do M√©todo PRIME." />
    <meta property="og:url" content="https://salesprime.com.br/" />
    <meta property="og:site_name" content="Sales Prime - Vendas √© o cora√ß√£o de todo neg√≥cio" />
    <meta property="og:updated_time" content="2025-10-16T19:20:57+00:00" />
    <meta property="og:image" content="https://salesprime.com.br/wp-content/uploads/2024/09/thumbnail-sales.jpg" />
    <meta property="og:image:secure_url"
        content="https://salesprime.com.br/wp-content/uploads/2024/09/thumbnail-sales.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt"
        content="Sales Prime Impulsionamos empresas treinando seus times comerciais. M√©todo PRIME¬Æ: validado em 7 pa√≠ses." />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="article:published_time" content="2025-04-11T18:21:50+00:00" />
    <meta property="article:modified_time" content="2025-10-16T19:20:57+00:00" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Sales Prime" />
    <meta name="twitter:description"
        content="Sales Prime - Fundada por Dani Martins, campe√£ de vendas reconhecida internacionalmente e criadora do M√©todo PRIME." />
    <meta name="twitter:image" content="https://salesprime.com.br/wp-content/uploads/2024/09/thumbnail-sales.jpg" />
    <meta name="twitter:label1" content="Escrito por" />
    <meta name="twitter:data1" content="Web_Designer" />
    <meta name="twitter:label2" content="Tempo para leitura" />
    <meta name="twitter:data2" content="3 minutos" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Estilos customizados -->
    <link href="styles.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
</head>

<body>
    <!-- [ETAPA 3] NAVBAR E MENU DO USU√ÅRIO -->
    <nav class="navbar navbar-expand-lg navbar-custom">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <svg width="141" height="58" viewBox="0 0 141 58" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_2825_92)">
                        <path
                            d="M62.5337 34.2059C65.7834 34.2059 67.5407 35.7528 67.5407 37.9477C67.5407 38.2858 67.4999 38.6943 67.3875 39.0406C67.2742 39.3878 67.1393 39.7217 66.9169 40.1178C66.5896 40.7002 66.0349 41.3457 65.5935 41.7227C64.5358 42.6258 63.2316 43.4801 63.2316 43.4801L58.0363 46.9916V51.823C58.0363 52.756 58.7959 53.5116 59.7337 53.5116V53.906H51.8975V53.5116C52.8352 53.5116 53.5948 52.756 53.5948 51.823V36.2881C53.5948 35.3584 52.8352 34.5995 51.8975 34.5995V34.2051H62.5337V34.2059ZM59.3081 44.5912C60.7031 43.5596 61.6117 42.5181 62.2438 41.562C62.8751 40.605 63.2374 39.2428 63.2374 37.9486C63.2374 36.5184 62.0082 35.3593 60.6348 35.3593C59.2614 35.3593 58.0355 36.5184 58.0355 37.9486V45.5482L59.3089 44.5912H59.3081Z"
                            fill="#E9EBF4" />
                        <path
                            d="M82.9293 47.2932C83.0043 47.5186 84.122 51.1618 84.3268 51.6904C84.5317 52.2191 84.7757 52.7469 85.0964 53.0468C85.417 53.3476 85.8135 53.5133 86.2665 53.5133V53.9077H80.3259C79.3256 50.4368 78.5619 48.0356 78.0347 46.7033C77.6008 45.5772 76.8937 45.3055 75.9135 45.8871L74.1312 46.9286V51.8255C74.1312 52.7585 74.8907 53.5141 75.8285 53.5141V53.9085H67.9365V53.5141C68.8743 53.5141 69.6339 52.7585 69.6339 51.8255V36.2906C69.6339 35.361 68.8743 34.602 67.9365 34.602V34.2076H78.5727C81.9366 34.2076 83.5798 35.8879 83.5798 37.9494C83.5798 38.6628 83.419 39.203 83.0992 39.8502C82.7786 40.4973 82.3164 41.098 81.7134 41.6515C81.1096 42.205 80.5016 42.688 79.8886 43.1006C79.2757 43.5133 78.5544 43.9549 77.7249 44.423C79.1199 43.8414 80.1951 43.7577 80.9497 44.1695C81.7034 44.5821 82.3638 45.6236 82.9302 47.2932H82.9293ZM75.348 44.8448C77.9106 43.3078 79.3365 40.5346 79.3365 37.9486C79.3365 36.5185 78.1713 35.3593 76.7338 35.3593C75.2963 35.3593 74.1312 36.5185 74.1312 37.9486V45.5482L75.348 44.8448Z"
                            fill="#E9EBF4" />
                        <path
                            d="M86.6636 34.6003V34.2059H94.4998V34.6003C93.562 34.6003 92.8025 35.3593 92.8025 36.289V51.8239C92.8025 52.7568 93.562 53.5125 94.4998 53.5125V53.9069H86.6636V53.5125C87.6014 53.5125 88.3609 52.7568 88.3609 51.8239V36.289C88.3609 35.3593 87.6014 34.6003 86.6636 34.6003Z"
                            fill="#E9EBF4" />
                        <path
                            d="M107.002 46.927L111.839 34.2059H117.893V34.6003C116.955 34.6003 116.195 35.3593 116.195 36.289V51.8239C116.195 52.7568 116.955 53.5125 117.893 53.5125V53.9069H110.085V53.5125C111.022 53.5125 111.782 52.7568 111.782 51.8239V37.386L105.728 53.9061H104.908L98.5715 37.386L98.5998 51.8239C98.5998 52.7568 99.3594 53.5125 100.297 53.5125V53.9069H95.6582V53.5125C96.596 53.5125 97.3555 52.7568 97.3555 51.8239V36.289C97.3555 35.3593 96.596 34.6003 95.6582 34.6003V34.2059H102.108L107.002 46.927Z"
                            fill="#E9EBF4" />
                        <path
                            d="M134.864 48.1267V53.906H119.051V53.5116C119.989 53.5116 120.749 52.756 120.749 51.823V36.2881C120.749 35.3584 119.989 34.5995 119.051 34.5995V34.2051H134.864V39.9885H134.468C134.468 37.4315 132.384 35.3576 129.815 35.3576H126.859C125.922 35.3576 125.162 36.1149 125.162 37.0479V43.4428H125.948C127.865 43.4428 129.419 41.8619 129.419 39.9893H129.816V48.1267H129.419C129.419 46.2152 127.865 44.6691 125.948 44.6691H125.162V51.0673C125.162 52.0003 125.921 52.756 126.859 52.756H129.815C132.385 52.756 134.468 50.6829 134.468 48.1267H134.864Z"
                            fill="#E9EBF4" />
                        <path
                            d="M58.292 10.2494C61.2544 10.2494 64.216 10.9405 64.9847 11.2321L64.4359 14.1429C63.4115 13.8521 61.1079 13.5969 59.1332 13.5969C56.3174 13.5969 55.7685 14.1793 55.7685 15.5249C55.7685 16.9799 56.7929 17.453 59.6454 18.3628C64.6924 20.0001 65.716 21.31 65.716 24.075C65.716 28.1863 63.449 29.6413 58.8775 29.6413C55.9517 29.6413 53.2092 29.0588 52.0391 28.6951L52.5513 25.7114C54.087 25.9658 56.135 26.2939 58.4394 26.2939C61.2919 26.2939 61.9507 25.8572 61.9507 24.1106C61.9507 22.9465 61.2928 22.4733 57.7082 21.1998C53.1001 19.5626 52.0399 18.4713 52.0399 15.597C52.0399 11.7765 53.9421 10.2486 58.2937 10.2486L58.292 10.2494Z"
                            fill="#E9EBF4" />
                        <path
                            d="M76.5039 17.7438H81.441V17.1257C81.441 14.9789 80.4532 13.7418 77.2351 13.7418C74.8582 13.7418 71.5668 14.1056 71.5668 14.1056L70.9455 11.1584C70.9455 11.1584 74.1636 10.3944 77.4916 10.3944C83.0142 10.3944 85.2812 12.9414 85.2812 16.8341V29.0953H82.3554L81.5509 27.0578C80.2708 28.1126 78.1129 29.459 75.5536 29.459C72.1523 29.459 69.8486 27.1672 69.8486 23.6375C69.8486 20.1078 72.1889 17.743 76.5047 17.743L76.5039 17.7438ZM81.441 20.5817H77.0161C74.6025 20.5817 73.6514 21.7094 73.6514 23.456C73.6514 25.2026 74.7116 26.1124 76.6138 26.1124C78.3694 26.1124 80.1975 25.3485 81.441 24.4752V20.5825V20.5817Z"
                            fill="#E9EBF4" />
                        <path
                            d="M97.4954 29.0961C96.6909 29.2055 95.9963 29.2784 95.3375 29.2784C92.156 29.2784 90.876 27.8591 90.876 24.5489V2.71771H94.6796V24.1479C94.6796 25.4943 95.1551 26.076 96.4352 26.076C96.7275 26.076 97.094 26.0395 97.4954 25.9666V29.0953V29.0961Z"
                            fill="#E9EBF4" />
                        <path
                            d="M116.293 27.9319C116.293 27.9319 114.391 29.4963 110.185 29.4963C104.042 29.4963 101.628 26.3676 101.628 20.1094C101.628 13.8512 104.225 10.3952 109.491 10.3952C115.818 10.3952 117.719 15.3434 116.622 21.3829H105.468C105.724 24.8397 106.967 26.1124 110.588 26.1124C113.588 26.1124 115.27 25.1661 115.27 25.1661L116.293 27.9311L116.293 27.9319ZM113.294 18.5807C113.403 15.7793 112.562 13.6324 109.527 13.6324C107.003 13.6324 105.723 15.1239 105.467 18.5807H113.294Z"
                            fill="#E9EBF4" />
                        <path
                            d="M127.299 10.2494C130.262 10.2494 133.223 10.9405 133.992 11.2321L133.443 14.1429C132.419 13.8521 130.115 13.5969 128.141 13.5969C125.325 13.5969 124.776 14.1793 124.776 15.5249C124.776 16.9799 125.8 17.453 128.653 18.3628C133.7 20.0001 134.723 21.31 134.723 24.075C134.723 28.1863 132.456 29.6413 127.885 29.6413C124.959 29.6413 122.217 29.0588 121.046 28.6951L121.559 25.7114C123.094 25.9658 125.142 26.2939 127.447 26.2939C130.299 26.2939 130.958 25.8572 130.958 24.1106C130.958 22.9465 130.3 22.4733 126.716 21.1998C122.107 19.5626 121.047 18.4713 121.047 15.597C121.047 11.7765 122.949 10.2486 127.301 10.2486L127.299 10.2494Z"
                            fill="#E9EBF4" />
                        <path
                            d="M42.2665 18.85C48.0964 24.65 48.0964 33.35 42.2665 39.15C37.5293 43.8629 23.3194 58 23.3194 58C23.3194 58 18.1341 52.8413 13.8758 48.6048C13.8591 48.5882 13.8591 48.5626 13.8758 48.546L13.9058 48.5162C16.9864 50.7293 22.1059 50.5072 24.7768 47.85L37.8941 34.8C42.8628 29.8567 43.4508 22.2065 39.6564 16.6245C40.5542 17.2666 41.4253 18.0123 42.2665 18.8492V18.85Z"
                            fill="#F2A011" />
                        <path
                            d="M23.3196 0C23.3196 0 28.5048 5.15869 32.7631 9.39517C32.779 9.41091 32.7798 9.43743 32.7631 9.454L32.7332 9.48383C29.6525 7.27071 24.533 7.49277 21.8621 10.15L8.74483 23.2C5.10032 26.8258 2.91494 31.9 7.28736 36.2508C11.6598 40.6008 16.7526 38.4175 20.3963 34.7917C22.5917 32.6076 23.7002 31.5172 24.8012 30.426C30.6669 24.6127 34.9793 29 34.9793 29L24.777 39.15C17.4897 46.4 10.2023 44.9508 4.37242 39.15C-1.45747 33.35 -1.45747 24.6492 4.37242 18.8492C9.10962 14.1379 23.3196 0 23.3196 0Z"
                            fill="#F2A011" />
                        <path
                            d="M11.6597 29C11.6597 29 19.3118 21.3871 21.862 18.85C22.664 18.0521 25.9304 14.713 30.0746 14.713C35.0375 14.713 37.8833 18.3496 38.7095 21.1626C34.4878 17.6163 29.7098 19.7598 26.2427 23.2091C22.0669 27.3636 21.6746 27.7356 21.5405 27.8616C15.8272 33.2398 11.6597 29 11.6597 29Z"
                            fill="#F2A011" />
                        <path
                            d="M140.056 34.4603C140.352 34.6293 140.583 34.863 140.75 35.1596C140.917 35.4571 141.001 35.791 141.001 36.1614C141.001 36.5317 140.918 36.8673 140.75 37.1681C140.583 37.468 140.352 37.7033 140.056 37.8724C139.761 38.0414 139.427 38.1267 139.054 38.1267C138.682 38.1267 138.338 38.0422 138.043 37.8724C137.747 37.7033 137.516 37.468 137.349 37.1681C137.181 36.8681 137.098 36.5326 137.098 36.1614C137.098 35.7902 137.181 35.4571 137.349 35.1596C137.515 34.8622 137.747 34.6293 138.043 34.4603C138.338 34.2913 138.675 34.2059 139.054 34.2059C139.434 34.2059 139.761 34.2904 140.056 34.4603ZM140.176 37.3015C140.462 37.0082 140.605 36.6278 140.605 36.1614C140.605 35.6949 140.462 35.3146 140.176 35.0212C139.891 34.7271 139.517 34.5804 139.054 34.5804C138.591 34.5804 138.211 34.7271 137.931 35.0212C137.652 35.3154 137.512 35.6957 137.512 36.1614C137.512 36.627 137.652 37.0082 137.931 37.3015C138.21 37.5956 138.585 37.7423 139.054 37.7423C139.523 37.7423 139.89 37.5956 140.176 37.3015ZM139.801 36.1473C139.721 36.2525 139.609 36.3279 139.468 36.3726L140.008 37.1681L139.401 37.178L138.939 36.4116H138.775V37.178H138.274V35.1174H139.199C139.417 35.1174 139.592 35.1745 139.723 35.2897C139.855 35.4049 139.921 35.5615 139.921 35.7595C139.921 35.9128 139.881 36.042 139.8 36.1481L139.801 36.1473ZM138.775 35.9981H139.169C139.24 35.9981 139.299 35.9791 139.348 35.941C139.396 35.9028 139.42 35.8482 139.42 35.7777C139.42 35.7073 139.396 35.6551 139.348 35.6195C139.299 35.5847 139.24 35.5664 139.169 35.5664H138.775V35.9981Z"
                            fill="#E9EBF4" />
                    </g>
                    <defs>
                        <clipPath id="clip0_2825_92">
                            <rect width="141" height="58" fill="white" />
                        </clipPath>
                    </defs>
                </svg>
                tasks
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item me-3">
                        <a class="nav-link" href="index.html" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Painel de Tarefas">
                            <i class="bi bi-list-task"></i>
                        </a>
                    </li>
                    <li class="nav-item me-3 admin-only" style="display:none;">
                        <a class="nav-link admin-link" href="relatorio.html" data-bs-toggle="tooltip"
                            data-bs-placement="bottom" title="Relat√≥rio">
                            <i class="bi bi-bar-chart"></i>
                        </a>
                    </li>
                    <!-- Link de Administra√ß√£o (apenas √≠cone, vis√≠vel apenas para admins) -->
                    <li class="nav-item admin-only" id="adminLinkItem" style="display:none;">
                        <a class="nav-link admin-link" href="admin.html" data-bs-toggle="tooltip"
                            data-bs-placement="bottom" title="Administra√ß√£o">
                            <i class="bi bi-gear"></i>
                        </a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle" data-bs-toggle="tooltip" data-bs-placement="bottom"
                                title="Meu Perfil"></i>
                            <span id="userName">Usu√°rio</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><span class="dropdown-item-text" id="userRole">Fun√ß√£o: Usu√°rio</span></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="abrirPerfil()"><i
                                        class="fas fa-user-edit"></i> Editar Perfil</a></li>
                            <li><a class="dropdown-item" href="#" onclick="alterarSenha()"><i class="fas fa-key"></i>
                                    Alterar Senha</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i>
                                    Sair</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Barra de Estat√≠sticas -->
        <div class="stats-bar">
            <div class="stat-card stat-total" data-value="0">
                <div class="stat-icon">
                    <i class="fas fa-archive"></i>
                </div>
                <div class="stat-content">
                    <h6>Total Arquivado</h6>
                    <p id="statTotal">0</p>
                </div>
            </div>

            <div class="stat-card stat-completed" data-value="0">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-content">
                    <h6>Conclu√≠dos</h6>
                    <p id="statConcluidos">0</p>
                </div>
            </div>

            <div class="stat-card stat-overdue" data-value="0">
                <div class="stat-icon">
                    <i class="fas fa-trash"></i>
                </div>
                <div class="stat-content">
                    <h6>Exclu√≠dos</h6>
                    <p id="statExcluidos">0</p>
                </div>
            </div>
        </div>

        <!-- Container Principal -->
        <div class="container-tarefas">
            <div class="header-actions">
                <div class="search-bar col-2">
                    <i class="fas fa-search"></i>
                    <input type="text" id="buscaArquivo" placeholder="Buscar projetos...">
                </div>

                <div class="filters">
                    <button class="filter-btn active" data-filter="todos">Todos</button>
                    <button class="filter-btn" data-filter="concluido">Conclu√≠dos</button>
                    <button class="filter-btn" data-filter="excluido">Exclu√≠dos</button>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline-primary" onclick="voltarParaPainel()">
                        <i class="fas fa-arrow-left"></i> Voltar ao Painel
                    </button>
                </div>
            </div>

            <!-- Grid de Projetos Arquivados - 4 colunas por linha -->
            <div class="row g-3" id="projetosArquivadosContainer">
                <div class="alert alert-info text-center col-12">
                    <div class="empty-state">
                        <i class="fas fa-archive fa-3x mb-3"></i>
                        <p>Carregando projetos arquivados...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Visualizar e Excluir Definitivamente Projeto -->
    <div class="modal fade" id="modalVisualizarExcluir" tabindex="-1" aria-labelledby="modalVisualizarExcluirLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalVisualizarExcluirLabel">Detalhes do Projeto: <span
                            id="nomeProjetoVisualizar"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="detalhesProjetoConteudo">
                        <p class="text-center text-muted" id="loadingDetalhes"><i class="fas fa-spinner fa-spin"></i>
                            Carregando detalhes...</p>
                        <div id="listaTarefasEtapas" style="display: none;">
                            <h6>Tarefas e Etapas:</h6>
                            <ul class="list-group" id="listaTarefas">
                                <!-- Tarefas ser√£o inseridas aqui pelo JS -->
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>

                    <!-- Bot√£o Restaurar -->
                    <button type="button" class="btn btn-success admin-only" id="btnRestaurarProjeto"
                        style="display:none;">
                        <i class="fas fa-arrow-counterclockwise"></i> Restaurar Projeto
                    </button>

                    <!-- Bot√£o Excluir Definitivamente -->
                    <button type="button" class="btn btn-danger admin-only" id="btnExcluirDefinitivamente"
                        style="display:none;">
                        <i class="fas fa-trash-alt"></i> Excluir Definitivamente
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Restaurar Projeto -->
    <div class="modal fade" id="modalRestaurar" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-arrow-counterclockwise"></i> Restaurar Projeto
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Tem certeza que deseja restaurar o projeto <strong id="nomeProjetoRestaura"></strong>?</p>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> O projeto voltar√° ao status <strong>Ativo</strong>.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success" id="btnConfirmarRestaurar">
                        <i class="fas fa-arrow-counterclockwise"></i> Restaurar
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Editar Perfil -->
    <div class="modal fade" id="modalEditarPerfil" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-user-edit me-2"></i>Editar Perfil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formEditarPerfil">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="editNome" class="form-label">Nome Completo</label>
                                <input type="text" class="form-control" id="editNome" required maxlength="100">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="editEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="editEmail" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="editUsername" class="form-label">Username</label>
                                <input type="text" class="form-control" id="editUsername" maxlength="50">
                                <div class="form-text">Usado para men√ß√µes username</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="editFuncao" class="form-label">Fun√ß√£o</label>
                                <select class="form-select" id="editFuncao" disabled>
                                    <option value="usuario">Usu√°rio</option>
                                    <option value="editor">Editor</option>
                                    <option value="admin">Administrador</option>
                                </select>
                                <div class="form-text">A fun√ß√£o s√≥ pode ser alterada por um administrador</div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="editBio" class="form-label">Biografia</label>
                            <textarea class="form-control" id="editBio" rows="3" maxlength="255"
                                placeholder="Fale um pouco sobre voc√™..."></textarea>
                            <div class="form-text"><span id="contadorBio">0</span>/255 caracteres</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarPerfil()"><i class="fas fa-save"></i>
                        Salvar Altera√ß√µes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Alterar Senha -->
    <div class="modal fade" id="modalAlterarSenha" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-key me-2"></i>Alterar Senha</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formAlterarSenha">
                        <div class="mb-3">
                            <label for="senhaAtual" class="form-label">Senha Atual</label>
                            <div class="password-input">
                                <input type="password" class="form-control" id="senhaAtual" required>
                                <button type="button" class="password-toggle"
                                    onclick="togglePasswordModal('senhaAtual')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="novaSenha" class="form-label">Nova Senha</label>
                            <div class="password-input">
                                <input type="password" class="form-control" id="novaSenha" required minlength="6"
                                    oninput="verificarForcaSenha()">
                                <button type="button" class="password-toggle"
                                    onclick="togglePasswordModal('novaSenha')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="form-text">M√≠nimo de 6 caracteres</div>
                            <div class="password-strength mt-2" id="strengthIndicator" style="display: none;"></div>
                        </div>

                        <div class="mb-3">
                            <label for="confirmarNovaSenha" class="form-label">Confirmar Nova Senha</label>
                            <div class="password-input">
                                <input type="password" class="form-control" id="confirmarNovaSenha" required
                                    oninput="verificarSenhaIgual()">
                                <button type="button" class="password-toggle"
                                    onclick="togglePasswordModal('confirmarNovaSenha')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="form-text" id="senhaMatchText"></div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarNovaSenha()"><i
                            class="fas fa-save"></i> Alterar Senha</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚úÖ ADICIONE ESTAS FUN√á√ïES AO SEU JavaScript -->
    <script>
        // Fun√ß√µes para Editar Perfil
        function abrirPerfil() {
            carregarDadosPerfil();
            new bootstrap.Modal(document.getElementById('modalEditarPerfil')).show();
        }

        function carregarDadosPerfil() {
            try {
                const userData = JSON.parse(localStorage.getItem('userdata') || '{}');
                document.getElementById('editNome').value = userData.nome || '';
                document.getElementById('editEmail').value = userData.email || '';
                document.getElementById('editUsername').value = userData.username || '';
                document.getElementById('editFuncao').value = userData.funcao || 'usuario';
                document.getElementById('editBio').value = userData.bio || '';
            } catch (e) {
                console.error('Erro ao carregar dados do perfil:', e);
            }
        }

        function salvarPerfil() {
            const nome = document.getElementById('editNome').value;
            const email = document.getElementById('editEmail').value;
            const username = document.getElementById('editUsername').value;
            const bio = document.getElementById('editBio').value;

            // Valida√ß√£o b√°sica
            if (!nome || !email) {
                alert('Nome e Email s√£o obrigat√≥rios');
                return;
            }

            // Aqui voc√™ faria uma chamada √† API para salvar
            alert('‚úÖ Perfil atualizado com sucesso!');
            // await fazerRequisicao('api.php', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({
            //         action: 'atualizar_perfil',
            //         nome, email, username, bio
            //     })
            // });

            bootstrap.Modal.getInstance(document.getElementById('modalEditarPerfil')).hide();
        }

        // Fun√ß√µes para Alterar Senha
        function alterarSenha() {
            new bootstrap.Modal(document.getElementById('modalAlterarSenha')).show();
        }

        function togglePasswordModal(fieldId) {
            const input = document.getElementById(fieldId);
            if (input.type === 'password') {
                input.type = 'text';
            } else {
                input.type = 'password';
            }
        }

        function verificarForcaSenha() {
            const senha = document.getElementById('novaSenha').value;
            const indicator = document.getElementById('strengthIndicator');

            if (!senha) {
                indicator.style.display = 'none';
                return;
            }

            indicator.style.display = 'block';
            let forca = 0;

            if (senha.length >= 6) forca++;
            if (senha.length >= 12) forca++;
            if (/[a-z]/.test(senha) && /[A-Z]/.test(senha)) forca++;
            if (/\d/.test(senha)) forca++;
            if (/[!@#$%^&*]/.test(senha)) forca++;

            const niveis = ['muito fraca', 'fraca', 'm√©dia', 'boa', 'muito forte'];
            const cores = ['danger', 'warning', 'info', 'success', 'success'];

            indicator.className = `password-strength mt-2 bg-${cores[forca - 1]}`;
            indicator.innerHTML = `<small>For√ßa: <strong>${niveis[forca - 1]}</strong></small>`;
            indicator.style.padding = '8px';
            indicator.style.borderRadius = '4px';
            indicator.style.color = 'white';
        }

        function verificarSenhaIgual() {
            const novaSenha = document.getElementById('novaSenha').value;
            const confirmar = document.getElementById('confirmarNovaSenha').value;
            const matchText = document.getElementById('senhaMatchText');

            if (!confirmar) {
                matchText.textContent = '';
                return;
            }

            if (novaSenha === confirmar) {
                matchText.textContent = '‚úÖ Senhas coincidem';
                matchText.style.color = 'green';
            } else {
                matchText.textContent = '‚ùå Senhas n√£o coincidem';
                matchText.style.color = 'red';
            }
        }

        function salvarNovaSenha() {
            const senhaAtual = document.getElementById('senhaAtual').value;
            const novaSenha = document.getElementById('novaSenha').value;
            const confirmar = document.getElementById('confirmarNovaSenha').value;

            // Valida√ß√£o
            if (!senhaAtual || !novaSenha || !confirmar) {
                alert('‚ö†Ô∏è Preencha todos os campos');
                return;
            }

            if (novaSenha.length < 6) {
                alert('‚ö†Ô∏è A nova senha deve ter no m√≠nimo 6 caracteres');
                return;
            }

            if (novaSenha !== confirmar) {
                alert('‚ö†Ô∏è As senhas n√£o coincidem');
                return;
            }

            // Aqui voc√™ faria uma chamada √† API para alterar
            alert('‚úÖ Senha alterada com sucesso!');
            // await fazerRequisicao('api.php', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({
            //         action: 'alterar_senha',
            //         senhaAtual,
            //         novaSenha
            //     })
            // });

            // Limpar formul√°rio
            document.getElementById('formAlterarSenha').reset();
            document.getElementById('senhaMatchText').textContent = '';
            document.getElementById('strengthIndicator').style.display = 'none';

            bootstrap.Modal.getInstance(document.getElementById('modalAlterarSenha')).hide();
        }
    </script>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // ‚úÖ SISTEMA DE AUTENTICA√á√ÉO
        function verificarAutenticacao() {
            const token = localStorage.getItem('auth_token') || localStorage.getItem('authtoken');
            if (!token) {
                console.log('‚ùå N√£o autenticado - redirecionando para login');
                window.location.href = 'login.html';
                return false;
            }
            console.log('‚úÖ Autenticado - token encontrado');
            return true;
        }

        function getCurrentUser() {
            const userData = localStorage.getItem('user_data') || localStorage.getItem('userdata');
            return userData ? JSON.parse(userData) : null;
        }

        // ‚úÖ ESTADO
        let estado = {
            projetos: [],
            projetoSelecionadoId: null,
            filtroAtual: 'todos',
            termoBusca: ''
        };

        // ‚úÖ REQUISI√á√ÉO COM AUTENTICA√á√ÉO
        async function fazerRequisicao(url, opcoes = {}) {
            try {
                const token = localStorage.getItem('auth_token') || localStorage.getItem('authtoken');
                if (!token) {
                    window.location.href = 'login.html';
                    return null;
                }

                if (!opcoes.headers) opcoes.headers = {};
                opcoes.headers['Authorization'] = `Bearer ${token}`;

                const resposta = await fetch(url, opcoes);

                if (resposta.status === 401) {
                    localStorage.removeItem('auth_token');
                    localStorage.removeItem('authtoken');
                    localStorage.removeItem('user_data');
                    localStorage.removeItem('userdata');
                    window.location.href = 'login.html';
                    return null;
                }

                const dados = await resposta.json();
                return dados;
            } catch (erro) {
                console.error('Erro na requisi√ß√£o:', erro);
                mostrarAlerta('Erro de conex√£o. Tente novamente.', 'danger');
                return null;
            }
        }

        // ‚úÖ CARREGAR PROJETOS ARQUIVADOS
        async function carregarProjetosArquivados() {
            if (!verificarAutenticacao()) return;

            const container = document.getElementById('projetosArquivadosContainer');
            container.innerHTML = `
                <div class="col-12">
                    <div class="empty-state">
                        <div class="loading-spinner"></div>
                        <p>Carregando projetos arquivados...</p>
                    </div>
                </div>
            `;

            const resultado = await fazerRequisicao('api.php?action=obter_projetos_finalizados');

            if (resultado && resultado.sucesso) {
                estado.projetos = resultado.dados || [];
                atualizarEstatisticas();
                renderizarProjetos();
            } else {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="empty-state">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Erro ao carregar projetos arquivados</p>
                        </div>
                    </div>
                `;
            }
        }

        // ‚úÖ ATUALIZAR ESTAT√çSTICAS
        function atualizarEstatisticas() {
            const total = estado.projetos.length;
            const concluidos = estado.projetos.filter(p => p.status === 'concluido').length;
            const excluidos = estado.projetos.filter(p => p.status === 'excluido').length;

            document.getElementById('statTotal').textContent = total;
            document.getElementById('statConcluidos').textContent = concluidos;
            document.getElementById('statExcluidos').textContent = excluidos;

            // Atualizar cores dos cards baseado nos valores
            document.querySelector('.stat-total').setAttribute('data-value', total);
            document.querySelector('.stat-completed').setAttribute('data-value', concluidos);
            document.querySelector('.stat-overdue').setAttribute('data-value', excluidos);
        }

        // ‚úÖ RENDERIZAR PROJETOS EM GRID 4 COLUNAS
        function renderizarProjetos() {
            const container = document.getElementById('projetosArquivadosContainer');
            let projetosFiltrados = estado.projetos;

            // Aplicar filtro
            if (estado.filtroAtual !== 'todos') {
                projetosFiltrados = projetosFiltrados.filter(p => p.status === estado.filtroAtual);
            }

            // Aplicar busca
            if (estado.termoBusca) {
                const termo = estado.termoBusca.toLowerCase();
                projetosFiltrados = projetosFiltrados.filter(p =>
                    p.nome.toLowerCase().includes(termo) ||
                    (p.descricao && p.descricao.toLowerCase().includes(termo))
                );
            }

            if (projetosFiltrados.length === 0) {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Nenhum projeto encontrado</p>
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = projetosFiltrados.map(projeto => `
                <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                    <div class="card-tarefa ${projeto.status === 'concluido' ? 'concluida' : ''} h-100" onclick="abrirModalVisualizar(${projeto.id}, '${escapeHtml(projeto.nome).replace(/'/g, "\\'")}')" style="cursor: pointer;">
                        <div class="card-header-mini">
                            <h5 class="titulo-tarefa">${escapeHtml(projeto.nome)}</h5>
                            <span class="badge-status ${projeto.status === 'concluido' ? 'status-concluida' : 'status-pausada'}">
                                ${projeto.status === 'concluido' ? '‚úÖ Conclu√≠do' : 'üóëÔ∏è Exclu√≠do'}
                            </span>
                        </div>
                        
                        <div class="descricao-tarefa">
                            ${projeto.descricao ? escapeHtml(projeto.descricao) : '<em class="text-muted">Sem descri√ß√£o</em>'}
                        </div>
                        
                        <div class="datas-tarefa">
                            <div class="data-item">
                                <i class="fas fa-calendar-check"></i>
                                <span>Conclu√≠do em: ${projeto.data_conclusao ? new Date(projeto.data_conclusao).toLocaleDateString('pt-BR') : 'N/A'}</span>
                            </div>
                        </div>
                        
                        <div class="acoes-tarefa mt-auto">
                            <button class="btn-acao btn-status w-100" onclick="abrirModalVisualizar(${projeto.id}, '${escapeHtml(projeto.nome).replace(/'/g, "\\'")}')">
                                <i class="fas fa-arrow-counterclockwise"></i> Restaurar
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            // ‚úÖ Inicializar tooltips para os novos elementos
            if (typeof inicializarTooltips === 'function') {
                inicializarTooltips();
            }
        }

        // ‚úÖ UTILIT√ÅRIOS
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function mostrarAlerta(mensagem, tipo = 'info') {
            // Criar alerta tempor√°rio
            const alert = document.createElement('div');
            alert.className = `alert alert-${tipo} alert-dismissible fade show position-fixed`;
            alert.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            alert.innerHTML = `
                ${mensagem}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(alert);

            setTimeout(() => {
                if (alert.parentNode) {
                    alert.remove();
                }
            }, 5000);
        }

        // ‚úÖ MODAL VISUALIZAR E EXCLUIR DEFINITIVAMENTE
        // ‚úÖ MODAL VISUALIZAR E EXCLUIR DEFINITIVAMENTE
        async function abrirModalVisualizar(id, nome) {
            try {
                estado.projetoSelecionadoId = id;

                // Usar querySelector mais robusto para encontrar os elementos
                const nomeProjetoElement = document.getElementById('nomeProjetoVisualizar');
                const loadingElement = document.getElementById('loadingDetalhes');
                const listaTarefasElement = document.getElementById('listaTarefasEtapas');
                const listaTarefasContent = document.getElementById('listaTarefas');

                if (nomeProjetoElement) {
                    nomeProjetoElement.textContent = nome;
                }

                // Limpar e mostrar loading - verificar se elementos existem
                if (listaTarefasElement) {
                    listaTarefasElement.style.display = 'none';
                }
                if (loadingElement) {
                    loadingElement.style.display = 'block';
                }
                if (listaTarefasContent) {
                    listaTarefasContent.innerHTML = '';
                }
                // Configurar bot√£o de restaurar
                const btnRestaurar = document.getElementById('btnRestaurarProjeto');
                if (btnRestaurar) {
                    btnRestaurar.onclick = function () {
                        confirmarRestaurar(id, nome);
                    };
                }
                // Configurar bot√£o de exclus√£o definitiva
                const btnExcluir = document.getElementById('btnExcluirDefinitivamente');
                if (btnExcluir) {
                    btnExcluir.onclick = confirmarExclusaoDefinitiva;
                    btnExcluir.disabled = false;
                    btnExcluir.innerHTML = '<i class="fas fa-trash-alt"></i> Excluir Definitivamente';
                }

                // Abrir modal primeiro
                const modalElement = document.getElementById('modalVisualizarExcluir');
                if (modalElement) {
                    const modal = new bootstrap.Modal(modalElement);
                    modal.show();
                }

                // Carregar detalhes do projeto (tarefas e etapas)
                console.log('Carregando detalhes do projeto:', id);
                const resultado = await fazerRequisicao(`api.php?action=obter_detalhes_projeto_arquivado&projeto_id=${id}`);

                // Esconder loading - verificar se elemento existe
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }

                if (resultado && resultado.sucesso) {
                    console.log('Detalhes carregados com sucesso:', resultado.dados);
                    renderizarDetalhesProjeto(resultado.dados);
                } else {
                    const erro = resultado ? resultado.erro : 'Erro desconhecido ao carregar detalhes';
                    console.error('Erro ao carregar detalhes:', erro);

                    const detalhesConteudo = document.getElementById('detalhesProjetoConteudo');
                    if (detalhesConteudo) {
                        detalhesConteudo.innerHTML = `<p class="text-center text-danger"><i class="fas fa-times-circle"></i> Erro ao carregar detalhes: ${erro}</p>`;
                    }
                }
            } catch (error) {
                console.error('Erro em abrirModalVisualizar:', error);
                const loadingElement = document.getElementById('loadingDetalhes');
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
                mostrarAlerta('Erro ao abrir detalhes do projeto', 'danger');
            }
        }
        function renderizarDetalhesProjeto(dados) {
            const listaTarefas = document.getElementById('listaTarefas');
            listaTarefas.innerHTML = '';

            if (dados.tarefas && dados.tarefas.length > 0) {
                dados.tarefas.forEach(tarefa => {
                    let etapasHtml = '';
                    if (tarefa.etapas && tarefa.etapas.length > 0) {
                        etapasHtml = `
                            <ul class="list-group list-group-flush mt-2">
                                ${tarefa.etapas.map(etapa => `
                                    <li class="list-group-item list-group-item-action ${etapa.concluida ? 'list-group-item-success' : 'list-group-item-warning'}">
                                        <i class="fas fa-check-circle me-2"></i> ${escapeHtml(etapa.nome)}
                                    </li>
                                `).join('')}
                            </ul>
                        `;
                    } else {
                        etapasHtml = '<p class="text-muted ms-3">Sem etapas cadastradas.</p>';
                    }

                    const tarefaItem = `
                        <li class="list-group-item list-group-item-primary mb-3">
                            <h5 class="mb-1">${escapeHtml(tarefa.nome)}</h5>
                            <p class="mb-1">Status: 
                                <span class="badge ${tarefa.status === 'concluida' ? 'bg-success' : 'bg-secondary'}">
                                    ${tarefa.status === 'concluida' ? 'Conclu√≠da' : 'Pendente'}
                                </span>
                            </p>
                            ${etapasHtml}
                        </li>
                    `;
                    listaTarefas.innerHTML += tarefaItem;
                });
                document.getElementById('listaTarefasEtapas').style.display = 'block';
            } else {
                listaTarefas.innerHTML = '<p class="text-center text-muted">Nenhuma tarefa encontrada para este projeto.</p>';
                document.getElementById('listaTarefasEtapas').style.display = 'block';
            }
        }

        // ‚úÖ CONFIRMAR EXCLUS√ÉO DEFINITIVA
        async function confirmarExclusaoDefinitiva() {
            if (!confirm('ATEN√á√ÉO: Esta a√ß√£o √© irrevers√≠vel! Deseja realmente excluir este projeto e todas as suas tarefas e etapas DEFINITIVAMENTE?')) {
                return;
            }

            const btnExcluir = document.getElementById('btnExcluirDefinitivamente');
            const textoOriginal = btnExcluir.innerHTML;

            btnExcluir.disabled = true;
            btnExcluir.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Excluindo...';

            const resultado = await fazerRequisicao('api.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    action: 'excluir_projeto_definitivamente',
                    projeto_id: estado.projetoSelecionadoId
                })
            });

            btnExcluir.disabled = false;
            btnExcluir.innerHTML = textoOriginal;

            if (resultado && resultado.sucesso) {
                mostrarAlerta('‚úÖ Projeto exclu√≠do definitivamente com sucesso!', 'success');
                bootstrap.Modal.getInstance(document.getElementById('modalVisualizarExcluir')).hide();
                await carregarProjetosArquivados();
            } else {
                const erro = resultado ? resultado.erro : 'Erro desconhecido';
                mostrarAlerta(`‚ùå Erro ao excluir projeto: ${erro}`, 'danger');
            }
        }

        // ‚úÖ MODAL RESTAURAR
        function abrirModalRestaurar(id, nome) {
            // A fun√ß√£o abrirModalRestaurar original agora √© chamada a partir do modal de visualiza√ß√£o
            // O bot√£o de restaurar foi movido para dentro do modal de visualiza√ß√£o no HTML, mas a fun√ß√£o de confirma√ß√£o √© a mesma.
            // Para manter a funcionalidade de restaurar separada, vamos apenas garantir que o ID esteja setado.
            estado.projetoSelecionadoId = id;
            estado.projetoSelecionadoId = id;
            document.getElementById('nomeProjetoRestaura').textContent = nome;

            const btnConfirmar = document.getElementById('btnConfirmarRestaurar');
            btnConfirmar.onclick = confirmarRestaurar;

            new bootstrap.Modal(document.getElementById('modalRestaurar')).show();
        }

        // ‚úÖ CONFIRMAR RESTAURA√á√ÉO
        // ‚úÖ CONFIRMAR RESTAURA√á√ÉO
        async function confirmarRestaurar(projetoId, projetoNome) {
            if (!projetoId) {
                console.error('ID do projeto n√£o fornecido');
                return;
            }

            if (!confirm(`Deseja restaurar o projeto "${projetoNome}"? O projeto voltar√° ao status Ativo.`)) {
                return;
            }

            const btnConfirmar = document.getElementById('btnConfirmarRestaurar');
            let textoOriginal = '';

            if (btnConfirmar) {
                textoOriginal = btnConfirmar.innerHTML;
                btnConfirmar.disabled = true;
                btnConfirmar.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Restaurando...';
            }

            try {
                const resultado = await fazerRequisicao('api.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'reabrir_projeto',
                        projeto_id: projetoId
                    })
                });

                if (btnConfirmar) {
                    btnConfirmar.disabled = false;
                    btnConfirmar.innerHTML = textoOriginal;
                }

                if (resultado && resultado.sucesso) {
                    mostrarAlerta('‚úÖ Projeto restaurado com sucesso!', 'success');

                    // Fechar ambos os modais
                    const modalVisualizar = bootstrap.Modal.getInstance(document.getElementById('modalVisualizarExcluir'));
                    if (modalVisualizar) {
                        modalVisualizar.hide();
                    }

                    const modalRestaurar = bootstrap.Modal.getInstance(document.getElementById('modalRestaurar'));
                    if (modalRestaurar) {
                        modalRestaurar.hide();
                    }

                    // Recarregar a lista
                    await carregarProjetosArquivados();
                } else {
                    const erro = resultado ? resultado.erro : 'Erro desconhecido';
                    mostrarAlerta(`‚ùå Erro ao restaurar projeto: ${erro}`, 'danger');
                }
            } catch (error) {
                console.error('Erro em confirmarRestaurar:', error);
                if (btnConfirmar) {
                    btnConfirmar.disabled = false;
                    btnConfirmar.innerHTML = textoOriginal;
                }
                mostrarAlerta('Erro ao restaurar projeto', 'danger');
            }
        }
        // ‚úÖ VOLTAR PARA PAINEL
        function voltarParaPainel() {
            window.location.href = 'index.html';
        }

        // ‚úÖ SAIR
        function sairSessao() {
            if (confirm('Deseja sair do sistema?')) {
                localStorage.removeItem('auth_token');
                localStorage.removeItem('authtoken');
                localStorage.removeItem('user_data');
                localStorage.removeItem('userdata');
                window.location.href = 'login.html';
            }
        }

        // ‚úÖ INICIALIZAR
        document.addEventListener('DOMContentLoaded', async function () {
            // Verificar autentica√ß√£o
            if (!verificarAutenticacao()) {
                return;
            }

            // Carregar dados do usu√°rio
            try {
                const user = getCurrentUser();
                if (user && user.nome) {
                    document.getElementById('userName').textContent = user.nome;
                    document.getElementById('userRole').textContent = `Fun√ß√£o: ${user.funcao || 'Usu√°rio'}`;
                }
            } catch (e) {
                console.error('Erro ao carregar dados do usu√°rio:', e);
            }

            // Configurar eventos de filtro
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    estado.filtroAtual = this.dataset.filter;
                    renderizarProjetos();
                });
            });

            // Configurar busca
            document.getElementById('buscaArquivo').addEventListener('input', function (e) {
                estado.termoBusca = e.target.value;
                renderizarProjetos();
            });

            // Carregar projetos
            await carregarProjetosArquivados();
        });
    </script>
    <!-- ========================================
     CORRE√á√ÉO - Adicione isto ao seu arquivo.html
     Logo ANTES do fechamento da tag </body>
     ======================================== -->

    <script>
        // ‚úÖ FUN√á√ïES GLOBAIS DO MENU DE USU√ÅRIO
        // Estas fun√ß√µes devem estar FORA do DOMContentLoaded

        function logout() {
            if (confirm('Tem certeza que deseja sair?')) {
                localStorage.removeItem('authtoken');
                localStorage.removeItem('userdata');
                window.location.href = 'login.html';
            }
        }
    </script>
    <!-- Depois os m√≥dulos -->
    <script src="js/perfil.js"></script>
    <script src="js/senha.js"></script>
    <!-- Core e Depend√™ncias -->
    <script src="js/core.js"></script>
    <script src="js/main.js"></script>
    <script src="js/utils.js"></script>

    <!-- Data e Renderiza√ß√£o -->
    <script src="js/data.js"></script>
    <script src="js/render.js"></script>
    <script src="js/ui.js"></script>

    <!-- Modais -->
    <script src="js/modals.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/profile.js"></script>

    <!-- Funcionalidades -->
    <script src="js/complementos.js"></script>
    <script src="js/taskManager.js"></script>
    <script src="js/actions.js"></script>

    <!-- Inicializa√ß√£o -->
    <script src="js/init.js"></script>

</body>

</html>